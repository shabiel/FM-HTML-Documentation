<!DOCTYPE HTML PUBLIC "-//SQ//DTD HTML 2.0 HoTMetaL + extensions//EN" "hmpro6.dtd">
<HTML> 
  <HEAD><!--VHA OI Health Systems Design & Development (HSD&D)-->
<!--Oakland OIFO-->
<!--Authored by Thom Blom and Kyle Clarke, 12/31/99-->
<!--Revised by Thom Blom, 06/27/03-->
<!--Edited March 2007, Hardhats.org--><META HTTP-EQUIV="Content-Type"
	 CONTENT="text/html; charset=iso-8859-1"> 
	 <TITLE>VA FileMan V. 22.0 Advanced User Manual: File Utilities - Key
		Definition</TITLE>
	 <META NAME="subject" CONTENT="VA FileMan V. 22.0 Advanced User HTML Manual">
	 <META NAME="keywords"
	  CONTENT="information infrastructure service,iis,vista,fileman,va fileman,user,advanced user manual,file utilities,utilities,key definition,create,delete,verify,edit,keys">
	 <LINK REL="StyleSheet" TYPE="text/css" HREF="user.css"> 
  </HEAD> 
  <BODY BGCOLOR="white" TOPMARGIN="0">
	<BR><IMG SRC="common/fileman_au_heading.gif" BORDER="0" WIDTH="429" HEIGHT="29"
	ALT="VA FileMan V. 22.0 Getting Started HTML Manual Banner">
	<BR>
	<HR ALIGN="left" WIDTH="429" COLOR="blue">
	<BR>
	<P>&nbsp;</P>
	<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLPADDING="3"
	  CLASS="tdstyle" SUMMARY="This table is for formatting purposes only" HEIGHT="1"
	  VALIGN="TOP"> 
		<TR> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">Contents:</TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="7%">
			 <A HREF="index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Advanced User HTML Manual: Main Table of Contents"
			  CLASS="menubarlink">Main</A> </TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="17%"><A
			 HREF="ut_frm.htm" TARGET="_top"
			 TITLE="VA FileMan V. 22.0 Advanced User HTML Manual: File Utilities Chapter TOC"
			 CLASS="menubarlink">Chapter</A></TD> 
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">See Also: </TD> 
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="28%"><A
			 HREF="../u1/index.htm" TARGET="_top"
			 TITLE="VA FileMan V. 22.0 Getting Started HTML Manual"
			 CLASS="menubarlink">Getting Started Manual</A></TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" COLSPAN="4" WIDTH="28%">
			 <A HREF="../pm/index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Programmer HTML Manual"
			  CLASS="menubarlink">Programmer Manual</A></TD> 
		</TR> 
	 </TABLE><!-- Content -->
	 <H3><A NAME="navskip">File Utilities</A></H3> <HR CLASS="hrstyle"> 
	 <H4>Key Definition&nbsp;<IMG SRC="new.gif"
		ALT="New/Updated with VA FileMan V. 22.0 with FM V. 22" WIDTH="35"
		HEIGHT="11"></H4> 
	 <UL> 
		<LI><A HREF="#create" TITLE="Create a Key" CLASS="bodylink">Create a
		  Key</A><BR><BR></LI> 
		<LI><A HREF="#edit" TITLE="Edit a Key" CLASS="bodylink">Edit a
		  Key</A><BR><BR></LI> 
		<LI><A HREF="#delete" TITLE="Delete a Key" CLASS="bodylink">Delete a
		  Key</A><BR><BR></LI> 
		<LI><A HREF="#verify" TITLE="Verify a Key" CLASS="bodylink">Verify a
		  Key</A></LI> 
	 </UL> 
	 <P>Using the Key Definition option, VA FileMan allows you to define keys on
		a file or subfile. A key is a group of fields that, taken collectively,
		uniquely identifies a record. All fields in a key must have values (must not be
		null) and those values, taken together, must be unique across all records in
		the file or subfile. VA FileMan enforces KEY INTEGRITY whenever records are
		added or edited.</P> 
	 <P>Exactly one key in a file must be designated the PRIMARY KEY. All other
		keys are SECONDARY KEYs. While VA FileMan enforces the integrity of both
		primary and SECONDARY KEYs, the PRIMARY KEY is VA FileMan's principal means of
		looking up entries in the file. VA FileMan will prompt for lookup values for
		each of the PRIMARY KEY fields, and will consider a record a match only if it
		matches all of the lookup values. The .01 field should be a part of the PRIMARY
		KEY.</P> 
	 <P>Keys are also useful when transporting data to another system using the
		Kernel Installation and Distribution (KIDS) system. Since the key fields
		uniquely identify a record, it is easy to decide whether a record being brought
		in to the target system needs to be merged to a record that already exists, or
		whether it is a new record.</P> 
	 <P>Associated with each key is a <I>Uniqueness Index</I>, a regular,
		New-Style cross-reference. The Uniqueness Index helps VA FileMan enforce KEY
		INTEGRITY and is used during lookup. When you create a new key, you can have VA
		FileMan create a new Uniqueness Index automatically for you, or you can select
		an existing index to be the Uniqueness Index of the key. The index you select,
		though, <I>must meet the following criteria</I>:</P> 
	 <UL> 
		<LI>It must be a regular, New-Style cross-reference. <BR><BR></LI> 
		<LI>It must be used for lookup and sorting; that is, it cannot have a
		  name that starts with the letter "A".<BR><BR></LI> 
		<LI>It cannot have any set or kill conditions.<BR><BR></LI> 
		<LI>It must consist of only field-type cross-reference values, all of
		  which are used as subscripts; that is, it can contain no computed
		  values.<BR><BR></LI> 
		<LI>No subscripts can have transforms.</LI> 
	 </UL> 
	 <P></P> <HR> 
	 <H5><A NAME="create">Create a Key</A>&nbsp;<IMG SRC="new.gif"
		ALT="New/Updated with VA FileMan V. 22.0 with FM V. 22" WIDTH="35"
		HEIGHT="11"></H5> 
	 <P>To create a key, proceed in the following manner:</P> 
	  
	 <PRE>Select OPTION: <B>UTI</B>LITY FUNCTIONS
Select UTILITY OPTION: <B>KEY</B> DEFINITION  

MODIFY WHAT FILE: ZZPATIENT// <B></B>
Select Subfile: <B></B>

There are no Keys defined on file #16026.
Want to create a new Key for this file? No// <B>Y</B>ES

Enter a Name for the new Key: A// <B>RET</B>
  Creating new Key 'A' ...
</PRE> <HR> 
	 <P>You will then be taken into Screen Mode (i.e.,
		<A HREF="../u1/sm_frm.htm" TARGET="_top" TITLE="ScreenMan"
		CLASS="bodylink">ScreenMan</A> form) where you can edit the properties of the
		key. Enter a single question mark ("<B>?</B>") or two question marks
		("<B>??</B>") at any prompt for additional help.</P> 
	 <CENTER> 
		<TABLE WIDTH="100%" BORDER="1"
		SUMMARY="This table is for formatting purposes only"> 
		  <TR> 
			 <TD> 
				<PRE>Number: 5                          EDIT A KEY             Page 1 of 1
---------------------------------------------------------------------
  File: 16026                   Name: A           Priority: PRIMARY  

  KEY FIELDS:
  ==========
  Field                Seq No.  File        Field Name
  -----                -------  ----        ----------






Uniqueness Index:

 Index Details...
_____________________________________________________________________





COMMAND:                             Press &lt;PF1&gt;H for help    Insert 
</PRE> </TD> 
		  </TR> 
		</TABLE> </CENTER> 
	 <P>On this screen, in the KEY FIELDS section, you can select the fields you
		wish to include in this key, and assign each field a sequence number. The
		sequence number determines the order in which the fields appear as subscripts
		in the Uniqueness Index. If you select the key fields in this manner, leave the
		Uniqueness Index field blank. When you exit the form, VA FileMan will prompt
		you for a name for the Uniqueness Index, and then give you the option of
		building the index now.</P> 
	  
	 <PRE>I'm going to create a new Uniqueness Index to support Key 'A' of File #16026.

Index Name: C// <B></B>

  One moment please ...

Do you want to build the index now? Yes// <B></B>
  Building new index ...  DONE!</PRE> <HR> 
	 <P>Alternatively, you can leave the information in the KEY FIELDS section
		blank, and select an existing Uniqueness Index. When you exit the form, VA
		FileMan checks that the information in the KEY FIELDS section is consistent
		with the selected Uniqueness Index. If there is a conflict, you are asked for a
		method to resolve the conflict. In this case, select Option #2, "Make Key match
		Uniqueness Index," as shown below:</P> 
	  
	 <PRE>The Key fields and the fields in the Uniqueness Index don't match.

     Select one of the following:

          1         Re-Edit the Key
          2         Make Key match Uniqueness Index (also selected on up-arrow)

Enter response: <B>2 </B>  Make Key match Uniqueness Index (also selected on up-arrow)

  Modifying fields in Key ...  DONE!
</PRE> <HR> 
	 <P></P><HR> 
	 <H5><A NAME="edit">Edit a Key</A>&nbsp;<IMG SRC="new.gif"
		ALT="New/Updated with VA FileMan V. 22.0 with FM V. 22" WIDTH="35"
		HEIGHT="11"></H5> 
	 <P>To edit a key, identify the file or subfile you wish to edit. VA FileMan
		will display the cross-references on the file and offer you the choices of
		Edit, Delete, or Create.</P> 
	  
	 <PRE>Select OPTION:  <B>UTI</B>LITY FUNCTIONS
Select UTILITY OPTION: <B>KEY</B> DEFINITION  

MODIFY WHAT FILE: ZZPATIENT// <B></B>
Select Subfile: <B></B>

Keys defined on file #16026:

  A  PRIMARY KEY    Uniqueness Index: C
         Field(s):  1) NAME (#.01)
                    2) SSN (#.02)

Choose V (Verify)/E (Edit)/D (Delete)/C (Create): <B>E</B>DIT

Which Key do you wish to edit? A// <B></B>
</PRE> <HR> 
	 <P>You will then be taken into Screen Mode (i.e.,
		<A HREF="../u1/sm_frm.htm" TARGET="_top" TITLE="ScreenMan"
		CLASS="bodylink">ScreenMan</A> form) where you can edit the properties of the
		key. Enter a single question mark ("<B>?</B>") or two question marks
		("<B>??</B>") at any prompt for additional help.</P> <HR> 
	 <H5><A NAME="delete">Delete a Key</A>&nbsp;<IMG SRC="new.gif"
		ALT="New/Updated with VA FileMan V. 22.0 with FM V. 22" WIDTH="35"
		HEIGHT="11"></H5> 
	 <P>The following dialogue shows how to delete a key. </P> 
	 <P><B>NOTE:</B> You are also given the option of deleting the Uniqueness
		Index of the key.</P> 
	  
	 <PRE>Select OPTION: <B>UTI</B>LITY FUNCTIONS
Select UTILITY OPTION: <B>KEY</B> DEFINITION  

MODIFY WHAT FILE: ZZPATIENT// <B></B>
Select Subfile: <B></B>

Keys defined on file #16026:

  A  PRIMARY KEY    Uniqueness Index: C
         Field(s):  1) NAME (#.01)
                    2) SSN (#.02)

Choose V (Verify)/E (Edit)/D (Delete)/C (Create): <B>D</B>ELETE

Which Key do you wish to delete? A// <B></B>
Are you sure you want to delete the Key? No// <B>Y</B>ES

  Key 'A' of File #16026 deleted.

Do you want to delete the 'C' Uniqueness Index (#6) on File #16026 previously
used by Key 'A' of File #16026? YES

  Index definition deleted.

Do you want to build the index now? Yes// <B></B>
  Removing old index ...  DONE!</PRE> <HR> 
	 <P></P><HR> 
	 <H5><A NAME="verify">Verify a Key</A>&nbsp;<IMG SRC="new.gif"
		ALT="New/Updated with VA FileMan V. 22.0 with FM V. 22" WIDTH="35"
		HEIGHT="11"></H5> 
	 <P>When you verify the integrity of a key, VA FileMan checks that all
		fields in the key have values (are not null), and that those field values,
		taken together, are unique across all records in the file. Any problems are
		reported. You can also save the entries that violate KEY INTEGRITY in a
		template.</P> 
	  
	 <PRE>Select OPTION: <B>UTI</B>LITY FUNCTIONS  
Select UTILITY OPTION: <B>KEY</B> DEFINITION  

MODIFY WHAT FILE: ZZPATIENT// <B></B>
Select Subfile: <B></B>

Keys defined on file #16026:

  A  PRIMARY KEY    Uniqueness Index: KEYA
         Field(s):  1) NAME (#.01)
                    2) SSN (#.02)

Choose V (Verify)/E (Edit)/D (Delete)/C (Create): <B>V</B>ERIFY

Which Key do you wish to verify? A// <B></B>
STORE THESE ENTRY ID'S IN TEMPLATE: <B></B>

DEVICE: HOME// <B></B>  Telnet terminal

KEY INTEGRITY CHECK                     DEC 31, 1998  09:23    PAGE 1
---------------------------------------------------------------------
             Key: A (#5), File #16026
Uniqueness Index: KEYA (#6)

ENTRY #  NAME                  ERROR
-------  ----                  -----
1        SMITH,JOHN            Duplicate Key A (#5)

2        SMITH,JOHN            Duplicate Key A (#5)

3        DOE,JANE              Missing Key Field(s):
                                 SSN [16026,.02]
</PRE> <HR> 
	 <P>In this example, records #1 and #2 have the same key, and record #3 is
		missing a value for SSN (field #.02).</P> 
	 <HR CLASS="hrstyle">
	 <!-- ut_key.htm -->
	 <P ALIGN="CENTER">Reviewed/Updated: March 4, 2007</P>
	 <P>&nbsp;</P> 

  </BODY>
</HTML>
