<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="subject" content="VA Fileman v. 22.0 Programmer HTML manual">
    <meta name="keywords"
    content="information infrastructure service,iis,infrastructure and security services,infrastructure security services,iss,vista,fileman,va fileman,programmer,developer,programmer manual,advanced file definitions,file definitions,definitions,files">
    <meta name="author" value="Sam Habiel">
    <title>VA FileMan Programmer Manual: ^DIKCBLD</title>
    <link rel="stylesheet" type="text/css" href="programmer.css">
  </head>
  <body topmargin="0">
    <br><img src="common/fileman_pm_heading.gif" border="0" width="429" height="29"
  alt="va fileman v. 22.0 programmer manual banner">
  <br>
  <hr align="left" width="429" color="blue">
<table border="0" width="100%" cellspacing="0" cellpadding="3"
    class="tdstyle" summary="this table is for formatting purposes only" height="1"
    valign="top">
    <tr>
      <td valign="bottom" align="left" height="1" width="10%"
      class="menubartext">Contents:</td>
      <td valign="bottom" align="left" height="1" width="7%">
       <a href="index.htm" target="_top"
        title="va fileman v. 22.0 programmer html manual: main table of contents"
        class="menubarlink">Main</a> </td>
      <td valign="bottom" align="left" height="1" width="17%"><a
       href="afd_frm.htm" target="_top"
       title="va fileman v. 22.0 programmer html manual: advanced file definition chapter toc"
       class="menubarlink">Chapter</a></td>
      <td align="left" valign="bottom" height="1" width="10%"
      class="menubartext">See Also: </td>
      <td align="left" valign="bottom" height="1" width="28%"><a
       href="../u1/index.htm" target="_top"
       title="va fileman v. 22.0 getting started html manual"
       class="menubarlink">Getting Started Manual</a></td>
      <td valign="bottom" align="left" height="1" colspan="4" width="28%">
       <a href="../u2/index.htm" target="_top"
        title="va fileman v. 22.0 advanced user html manual"
        class="menubarlink">Advanced User Manual</a></td>
    </tr>
   </table>
   <!-- content -->
	 <h3><a name="navskip">^DIKCBLD: Build an M Routine that Makes a Call to
     CREIXN^DDMOD</a></h3>
   <p>This programmer mode utility creates a routine that makes a call to
     CREIXN^DDMOD to create a New-Style cross-reference.</p>
   <h4>Details</h4>
   <p>If you use KIDS to transport a field that is a value in a New-Style
   cross-reference, that cross-reference is automatically transported and
   installed at the installing site. In some situations, however, you can create
   a New-Style cross-reference definition on a target system without sending
   fields, or create a New-Style cross-reference on-the-fly on a running system.
   To do this, you can write an M routine that makes a call to CREIXN^DDMOD.
   The input parameters to the CREIXN^DDMOD API are fairly extensive. ^DIKCBLD
   can be used to facilitate the development of the code that calls
   CREIXN^DDMOD. It automatically builds an M routine that sets up the input
   parameters and makes the call to CREIXN^DDMOD.  When ^DIKCBLD is run, it asks
   for name of a routine and the namespace to use for local variables within
   that routine. It also asks you to select a New-Style cross-reference that
   exists in the development account. The input parameters to the CREIXN^DDMOD
   call in the generated routine are set based on the selected
   cross-reference.</p>
   <h5>Note</h5>
   <p>The routine generated by ^DIKCBLD is a skeleton. You must still edit the
   routine to fill in the missing details on the first and second lines, as well
   as customize the parameters routine to the CREIXN^DDMOD call.</p>
   <pre>
>D ^DIKCBLD
Routine name: ZZTEST
Routine ZZTEST already exists.
Do you wish to replace routine ZZTEST? NO// YES
Programmer initials: WAM
Namespace to use for local variables: MY
CROSS-REFERENCE FROM WHAT FILE: 16012 &lt;Enter&gt; ZZMYTESTFILE (1 entry) Current Indexes on file #16012:
220 ‘AD’ index
Which Index do you wish to build a routine for? 220 &lt;Enter&gt; AD ‘ZZTEST’ ROUTINE FILED.
Done!
    Be sure to edit the routine to fill in the missing details,
    and to customize the call to CREIXN^DDMOD.
>ZP ^ZZTEST
ZZTEST ;xxxx/WAM-CREATE NEW-STYLE XREF ;11:06 AM 9 Jul 2002
 ;;1.0
 ;
 N myXR,myRES,myOUT
 S myXR(“FILE”)=16012
 S myXR(“NAME”)=“AD”
 S myXR(“TYPE”)=“MU”
 S myXR(“USE”)=“A”
 S myXR(“EXECUTION”)=“F”
 S myXR(“SHORT DESCR”)=“This MUMPS cross-reference updates
  field #2 when field #1 is deleted.”
 S myXR(“DESCR”,1)=“The kill logic of this cross-reference
  calls the Filer to stuff today’s”
 S myXR(“DESCR”,2)=“date into field #2 whenever the value
  of field #1 is deleted.”
 S myXR(“DESCR”,3)=“ “
 S myXR(“DESCR”,4)=“The set logic calls the Filer to
  delete the contents of field #2”
 S myXR(“DESCR”,5)=“when a value is placed into field #1.”
 S myXR(“SET”)=“N ZZFDA,ZZMSG,DIERR
  S ZZFDA(16012,DA_”“,”“,2)=““““
  D FILE^DIE(““““,”“ZZFDA”“,”“ZZMSG”“)”
 S myXR(“KILL”)=“N ZZFDA,ZZMSG,DIERR
  S ZZFDA(16012,DA_”“,”“,2)=DT
  D FILE^DIE(““““,”“ZZFDA”“,”“ZZMSG”“)”
 S myXR(“SET CONDITION”)=“S X=X1(1)=“““““
 S myXR(“KILL CONDITION”)=“S X=X2(1)=“““““
 S myXR(“VAL”,1)=1
 D CREIXN^DDMOD(.myXR,”SW”,.myRES,”myOUT”)
 Q

   </pre>
   <!-- end of content -->
   <hr class="hrstyle">
   <footer>Reviewed/Updated: August 21 2016</footer>
  </body>
</html>
