<!DOCTYPE HTML PUBLIC "-//SQ//DTD HTML 2.0 HoTMetaL + extensions//EN" "hmpro6.dtd">
<HTML> 
  <HEAD>
<!--VHA OI Health Systems Design & Development (HSD&D)-->
<!--Oakland OIFO-->
<!--Authored by Thom Blom and Kyle Clarke, 12/31/99-->
<!--Revised by Strack Susan, 11/26/02-->
<!--Edited March 2007, Hardhats.org-->
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"> 
	 <TITLE>VA FileMan Programmer Manual: Audit Condition</TITLE>
	 <META NAME="subject" CONTENT="VA FileMan V. 22.0 Programmer HTML Manual">
	 <META NAME="keywords"
	  CONTENT="Information Infrastructure Service,IIS,Infrastructure and Security Services,Infrastructure Security Services,ISS,VISTA,FileMan,VA FileMan,programmer,developer,programmer manual,advanced file definitions,file definitions,definitions,files">
	 <LINK REL="StyleSheet" TYPE="text/css" HREF="programmer.css"> 
  </HEAD>
	<BODY TOPMARGIN="0" BGCOLOR="white">
  	<BR><IMG SRC="common/fileman_pm_heading.gif" BORDER="0" WIDTH="429" HEIGHT="29"
	ALT="VA FileMan V. 22.0 Programmer Manual Banner">
	<BR>
	<HR ALIGN="left" WIDTH="429" COLOR="blue">
	<BR>
	<P>&nbsp;</P>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLPADDING="3"
	  CLASS="tdstyle" SUMMARY="This table is for formatting purposes only" HEIGHT="1"
	  VALIGN="TOP"> 
		<TR> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">Contents:</TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="7%">
			 <A HREF="index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Programmer HTML Manual: Main Table of Contents"
			  CLASS="menubarlink">Main</A> </TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="17%"><A
			 HREF="afd_frm.htm" TARGET="_top"
			 TITLE="VA FileMan V. 22.0 Programmer HTML Manual: Advanced File Definition Chapter TOC"
			 CLASS="menubarlink">Chapter</A></TD> 
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">See Also: </TD> 
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="28%"><A
			 HREF="../u1/index.htm" TARGET="_top"
			 TITLE="VA FileMan V. 22.0 Getting Started HTML Manual"
			 CLASS="menubarlink">Getting Started Manual</A></TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" COLSPAN="4" WIDTH="28%">
			 <A HREF="../u2/index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Advanced User HTML Manual"
			  CLASS="menubarlink">Advanced User Manual</A></TD> 
		</TR> 
	 </TABLE><!-- Content -->
	 <H3><A NAME="navskip">Advanced File Definition</A></H3> 
	 <H4>Audit Condition</H4> <HR CLASS="hrstyle"> 
	 <P>You can make a data audit conditional when you define a field as being
		audited. An audit condition is a line of M code with the characteristics that
		follow: </P> 
	 <UL> 
		<LI>The condition must contain an IF-statement or in some way set $T.
		  <BR><BR></LI> 
		<LI>The audit will take place only if $T=1.<BR><BR></LI> 
		<LI>The variables available to a programmer are: 
		  <TABLE BORDER="1" WIDTH="100%"
			SUMMARY="Variables Available to a Programmer"
			TITLE="Variables Available to a Programmer"> 
			 <TR> 
				<TD VALIGN="TOP"><B>Variable</B></TD> 
				<TD VALIGN="TOP" COLSPAN="2"><B>Description</B></TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP"><B>DA</B> </TD> 
				<TD VALIGN="TOP" COLSPAN="2">Internal number of the entry being
				  audited. The DA-array will exist if the audit is in a subfile. </TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP"><B>DIE</B> </TD> 
				<TD VALIGN="TOP" COLSPAN="2">The global root of the file or subfile
				  being audited. </TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP" ROWSPAN="3"><B>DIIX</B> </TD> 
				<TD VALIGN="TOP" COLSPAN="2">A two-piece variable described below:
				  </TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP"><B>piece 1</B></TD> 
				<TD VALIGN="TOP">3 if this audit is taking place during a set; and
				  2 if this audit is taking place during a kill. </TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP"><B>piece 2</B></TD> 
				<TD VALIGN="TOP">Field number being edited. </TD> 
			 </TR> 
			 <TR> 
				<TD VALIGN="TOP"><B>X</B></TD> 
				<TD VALIGN="TOP" COLSPAN="2">The internal representation of a
				  field's value, i.e., the actual stored value. X is always present, but its
				  value will vary based on the first piece of DIIX. If $P(DIIX,U,1)=3, then X
				  equals the new value in the field. If $P(DIIX,U,1)=2, then X equals the old
				  value in the field. </TD> 
			 </TR> 
		  </TABLE></LI> 
	 </UL> 
	 <P>If the data type of the field being audited is a Pointer, Variable
		Pointer, or Set of Codes, then the internal value of the field and its data
		type will be stored. The old value is stored on node 2.1 of the entry in the
		Audit file (#1.1) and the new value is stored on node 3.1. </P>
	 <P>&nbsp;</P> 
	 <HR CLASS="hrstyle">
	 <!-- afd_11.htm -->
	 <P ALIGN="CENTER">Reviewed/Updated: March 10, 2007</P>
	 <P>&nbsp;</P> 

  </BODY>
</HTML>
