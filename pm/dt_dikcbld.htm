<!DOCTYPE HTML PUBLIC "-//SQ//DTD HTML 2.0 HoTMetaL + extensions//EN" "hmpro6.dtd">
<HTML> 
  <HEAD> 
	 <!--VHA OI Health Systems Design & Development (HSD&D)-->
<!--Oakland OIFO-->
<!--Authored by Susan Strack 7/12/02-->
	 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1"> 
	 <TITLE>VA FileMan Programmer Manual: ^DIKCBLD</TITLE>
	 <META NAME="subject" CONTENT="VA FileMan V. 22.0 Programmer HTML Manual">
	 <META NAME="keywords"
	  CONTENT="Information Infrastructure Service,IIS,Infrastructure and Security Services,Infrastructure Security Services,ISS,VISTA,FileMan,VA FileMan,programmer,developer,programmer manual,database server (dbs) calls,database server api,api,calls,dbs,dbs calls,database,server,^DIKCBLD,dikcbld">
	 <LINK REL="StyleSheet" TYPE="text/css" HREF="programmer.css"> 
     <style>
<!--
pre          { font-size: 10pt; font-family: Courier New }
-->
     </style>
  </HEAD>
	<BODY TOPMARGIN="0" BGCOLOR="white">
  	<BR><IMG SRC="common/fileman_pm_heading.gif" BORDER="0" WIDTH="429" HEIGHT="29"
	ALT="VA FileMan V. 22.0 Programmer Manual Banner">
	<BR>
	<HR ALIGN="left" WIDTH="429" COLOR="blue">
	<BR>
	<P>&nbsp;</P>
<TABLE BORDER="0" WIDTH="100%" CELLSPACING="0" CELLPADDING="3"
	  CLASS="tdstyle" SUMMARY="This table is for formatting purposes only" HEIGHT="1"
	  VALIGN="TOP"> 
		<TR> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">Contents:</TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="7%">
			 <A HREF="index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Programmer HTML Manual: Main Table of Contents"
			  CLASS="menubarlink">Main</A> </TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" WIDTH="17%"><A
			 HREF="dba_frm.htm" TARGET="_top" CLASS="menubarlink"
			 TITLE="VA FileMan V. 22.0 Programmer HTML Manual: Database Server (DBS) API Chapter TOC">Chapter</A></TD>
		  
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="10%"
			CLASS="menubartext">See Also: </TD> 
		  <TD ALIGN="LEFT" VALIGN="BOTTOM" HEIGHT="1" WIDTH="28%"><A
			 HREF="../u1/index.htm" TARGET="_top"
			 TITLE="VA FileMan V. 22.0 Getting Started HTML Manual"
			 CLASS="menubarlink">Getting Started Manual</A></TD> 
		  <TD VALIGN="BOTTOM" ALIGN="LEFT" HEIGHT="1" COLSPAN="4" WIDTH="28%">
			 <A HREF="../u2/index.htm" TARGET="_top"
			  TITLE="VA FileMan V. 22.0 Advanced User HTML Manual"
			  CLASS="menubarlink">Advanced User Manual</A></TD> 
		</TR> 
	 </TABLE><!-- Content -->
	 <H3><A NAME="navskip">^DIKCBLD</A></H3>
	 <HR CLASS="hrstyle"> 
  <H4>^DIKCBLD: Build an M Routine That Makes a Call to CREIXN^DDMOD</H4> 
	 <P>This programmer mode utility creates a routine that makes a call to <a href="db_ddmo4.htm" TITLE="CREIXN^DDMOD" CLASS="bodylink">CREIXN^DDMOD</a>
     to create a new-style cross-reference.</P> 
	 <P></P> 
	 <H5>Details</H5> 
	 <P>If you use KIDS to transport a field that is a value in a new-style
     cross-reference, that cross-reference is automatically transported and
     installed at the installing site. In some situations, however, you may need
     to create a new-style cross-reference definition on a target system without
     sending fields, or create a new-style cross-reference on-the-fly
     on a running system. In order to do this, you can write an M routine that
     makes a call to CREIXN^DDMOD.</P> 
	 <P>The input parameters to the CREIXN^DDMOD API are fairly extensive. ^DIKCBLD
     can be used to facilitate the development of the code that calls CREIXN^DDMOD.
     It automatically builds an M routine that sets up the input parameters and
     makes the call to CREIXN^DDMOD.</P> 
	 <P>When ^DIKCBLD is run, it asks for name of a routine and the namespace to
     use for local variables within that routine. It also asks you to select a
     new-style cross-reference that exists in the development account. The input
     parameters to the CREIXN^DDMOD call in the generated routine are set based
     on the selected cross-reference.</P> 
	 <P>Note that the routine generated by ^DIKCBLD is a skeleton. You must
     still edit the routine to fill in the missing details on the first and
     second lines, as well as customize the parameters routine to the CREIXN^DDMOD call.</P> 
	 <H5>Example</H5> 
  <PRE>&gt;<b>D ^DIKCBLD</b>

Routine name: <b>ZZTEST</b>

  Routine ZZTEST already exists.
  Do you wish to replace routine ZZTEST? NO// <b>Y</b>ES

Programmer initials: <b>WAM</b>
Namespace to use for local variables: <b>my</b>

CROSS-REFERENCE FROM WHAT FILE: <b>16012</b>  ZZMYTESTFILE  (1 entry)

Current Indexes on file #16012:
  220    'AD' index

Which Index do you wish to to build a routine for? <b>220</b>  AD

'ZZTEST' ROUTINE FILED.

  Done!

  Be sure to edit the routine to fill in the missing details,
  and to customize the call to CREIXN^DDMOD.

&gt;<b>ZL ZZTEST ZP</b>
ZZTEST  ;xxxx/WAM-CREATE NEW-STYLE XREF ;11:06 AM  9 Jul 2002
        ;;1.0
        ;
        N myXR,myRES,myOUT
        S myXR(&quot;FILE&quot;)=16012
        S myXR(&quot;NAME&quot;)=&quot;AD&quot;
        S myXR(&quot;TYPE&quot;)=&quot;MU&quot;
        S myXR(&quot;USE&quot;)=&quot;A&quot;
        S myXR(&quot;EXECUTION&quot;)=&quot;F&quot;
        S myXR(&quot;SHORT DESCR&quot;)=&quot;This MUMPS cross-reference updates
         field #2 when field #1 is deleted.&quot;
        S myXR(&quot;DESCR&quot;,1)=&quot;The kill logic of this cross-reference
         calls the Filer to stuff today's&quot;
        S myXR(&quot;DESCR&quot;,2)=&quot;date into field #2 whenever the value
         of field #1 is deleted.&quot;
        S myXR(&quot;DESCR&quot;,3)=&quot; &quot;
        S myXR(&quot;DESCR&quot;,4)=&quot;The set logic calls the Filer to
         delete the contents of field #2&quot;
        S myXR(&quot;DESCR&quot;,5)=&quot;when a value is placed into field #1.&quot;
        S myXR(&quot;SET&quot;)=&quot;N ZZFDA,ZZMSG,DIERR
         S ZZFDA(16012,DA_&quot;&quot;,&quot;&quot;,2)=&quot;&quot;&quot;&quot;
         D FILE^DIE(&quot;&quot;&quot;&quot;,&quot;&quot;ZZFDA&quot;&quot;,&quot;&quot;ZZMSG&quot;&quot;)&quot;
        S myXR(&quot;KILL&quot;)=&quot;N ZZFDA,ZZMSG,DIERR
         S ZZFDA(16012,DA_&quot;&quot;,&quot;&quot;,2)=DT
         D FILE^DIE(&quot;&quot;&quot;&quot;,&quot;&quot;ZZFDA&quot;&quot;,&quot;&quot;ZZMSG&quot;&quot;)&quot;
        S myXR(&quot;SET CONDITION&quot;)=&quot;S X=X1(1)=&quot;&quot;&quot;&quot;&quot;
        S myXR(&quot;KILL CONDITION&quot;)=&quot;S X=X2(1)=&quot;&quot;&quot;&quot;&quot;
        S myXR(&quot;VAL&quot;,1)=1
        D CREIXN^DDMOD(.myXR,&quot;SW&quot;,.myRES,&quot;myOUT&quot;)
        Q
</PRE> 
	 <P></P>
	 <P>&nbsp;</P> 
	 <HR CLASS="hrstyle">
	 <!-- dt_dikcbld.htm -->
	 <P ALIGN="CENTER">Reviewed/Updated: March 10, 2007</P>
	 <P>&nbsp;</P> 

  </BODY>
</HTML>
